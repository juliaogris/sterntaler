---
name: git
description: Git helper for history and commits
argument-hint: [st [DIR|FILE]] | [push [DIR|FILE]]
allowed-tools: [Bash, Read, Glob]
model: opus
source: user
enabled: true
---

## Usage

- `/git` — Show last 12 commits on current branch
- `/git st [DIR|FILE]` — Show git status from repo root (default: .)
- `/git push [DIR|FILE]` — Stage, commit, and push changes (default: .)

---

## `/git` (default)

Show recent commit history, similar to `git hist`:

```bash
git --no-pager log --color --pretty=format:'%C(yellow)%h%C(reset) %<(50,trunc)%s  %C(white dim) %<(15,trunc) %an %C(reset)%C(bold red)%<(35,trunc)%D %C(reset)' -12
```

---

## `/git st [DIR|FILE]`

1. Find git root from the given path (default `.`)
2. Run `git status` from the repo root

---

## `/git push [DIR|FILE]`

1. Find git root from the given path (default `.`)
2. Run `git status` and `git diff --staged` to understand changes
3. If unstaged changes exist outside the target, print warning but continue
4. Show files that will be committed
5. Draft commit message following conventions below
6. Show message for review, revise if needed
7. On approval: `cd` to git root, `git add <target>`, `git commit`, `git push`

### Commit Message Conventions

**Subject line:**
- 50 chars max, imperative voice ("Add feature" not "Added feature")
- Start with lowercase tag + colon if applicable: `api:`, `db:`, `ui:`, `graph:`
- No period at end

**Body:**
- Wrap at 72 chars
- Explain what and WHY (always include why if applicable)
- Imperative voice throughout
- No "In this commit", "This change", etc.
- Prose over bullet lists (lists only when truly needed)
- Indent commands and verbatim text with 4 spaces

**Trailers** (when applicable):
```
Link: https://example.com
Issue: https://github.com/org/repo/issues/123
Gen-command: make proto
```

**Do NOT:**
- Use semantic commits (feat:, fix:, chore:)
- Add "Generated by Claude" or co-author trailers
- Use shorthand issue refs (#123) — always full URLs
